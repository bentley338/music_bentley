<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Admin - MelodyVerse</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" href="app_icon.png" type="image/png">
    <style>
        /* Gaya spesifik untuk halaman admin (gunakan CSS dari style.css utama untuk konsistensi) */
        body {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            min-height: 100vh;
        }

        .admin-container {
            padding: 40px;
            text-align: center;
            background: var(--player-bg-dark);
            backdrop-filter: blur(var(--blur-intensity)) saturate(150%);
            -webkit-backdrop-filter: blur(var(--blur-intensity)) saturate(150%);
            border: 1px solid var(--player-border);
            border-radius: var(--border-radius-main);
            box-shadow: 0 15px 50px var(--shadow-deep);
            max-width: 800px; /* Lebih lebar untuk konten lebih banyak */
            width: 90%;
            margin: auto;
            margin-top: 100px; /* Ruang dari header */
            margin-bottom: 20px;
            transition: background 0.5s ease, border-color 0.5s ease, box-shadow 0.5s ease;
        }

        .admin-container h2 {
            font-family: 'Montserrat', sans-serif;
            color: var(--primary-text);
            font-size: 2.5em; /* Judul lebih besar */
            margin-bottom: 30px;
            transition: color 0.5s ease;
            text-shadow: 1px 1px 5px rgba(0,0,0,0.7);
        }

        #login-section, #admin-panel {
            padding: 20px;
            margin-top: 20px;
            border-radius: var(--border-radius-sm);
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: background 0.5s ease, border-color 0.5s ease;
            text-align: left; /* Teks rata kiri di dalam panel */
        }
        body.light-mode #login-section,
        body.light-mode #admin-panel {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--secondary-text);
            font-size: 0.95em;
            transition: color 0.5s ease;
        }

        .input-group input[type="text"],
        .input-group input[type="password"],
        .input-group textarea,
        .admin-section-content input[type="text"] { /* Untuk input lain di panel admin */
            width: calc(100% - 20px);
            padding: 10px;
            background: var(--input-bg);
            border: 1px solid var(--input-border);
            border-radius: var(--border-radius-sm);
            color: var(--input-text);
            font-size: 1em;
            outline: none;
            transition: all 0.3s ease;
        }
        body.light-mode .input-group input,
        body.light-mode .input-group textarea,
        body.light-mode .admin-section-content input {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.15);
            color: var(--input-text);
        }

        .input-group input:focus,
        .input-group textarea:focus,
        .admin-section-content input:focus {
            border-color: var(--accent-purple);
            box-shadow: 0 0 8px rgba(138, 43, 226, 0.5);
        }
        body.light-mode .input-group input:focus,
        body.light-mode .admin-section-content input:focus {
            border-color: var(--accent-red);
            box-shadow: 0 0 8px rgba(255, 69, 0, 0.5);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .admin-btn {
            background: var(--accent-purple);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            margin-top: 10px;
        }

        .admin-btn:hover {
            background-color: var(--accent-red);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }

        #admin-panel {
            display: none;
            padding: 30px; /* Padding lebih banyak untuk tampilan lebih bersih */
        }

        .admin-section {
            margin-bottom: 40px; /* Jarak antar bagian */
            border-bottom: 1px solid rgba(255, 255, 255, 0.1); /* Pemisah */
            padding-bottom: 20px;
        }
        .admin-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        body.light-mode .admin-section {
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }


        .admin-section h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8em;
            color: var(--primary-text);
            margin-top: 0;
            margin-bottom: 20px;
            text-align: center; /* Pusatkan judul bagian */
        }

        .admin-section-content {
            background: rgba(0, 0, 0, 0.1);
            border-radius: var(--border-radius-sm);
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        body.light-mode .admin-section-content {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }


        .song-list {
            list-style: none;
            padding: 0;
            margin-top: 20px;
        }

        .song-list li {
            display: flex;
            flex-wrap: wrap; /* Izinkan pembungkus di mobile */
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            padding: 10px 15px;
            margin-bottom: 10px;
            border-radius: var(--border-radius-sm);
            border-left: 5px solid var(--accent-purple);
            transition: background 0.3s ease, border-left-color 0.3s ease;
        }
        body.light-mode .song-list li {
            background: rgba(0, 0, 0, 0.03);
            border-left-color: var(--accent-red);
        }


        .song-list li .song-info {
            flex-grow: 1;
            margin-right: 10px; /* Jarak dari tindakan */
        }
        .song-list li .song-info h3 {
            margin: 0;
            font-size: 1.1em;
            color: var(--primary-text);
        }
        .song-list li .song-info p {
            margin: 3px 0 0;
            font-size: 0.9em;
            color: var(--secondary-text);
        }
        .song-list li .song-info small {
            display: block;
            font-size: 0.8em;
            color: rgba(255, 255, 255, 0.5);
            margin-top: 5px;
            word-break: break-all; /* Memecah nama file yang panjang */
        }
        body.light-mode .song-list li .song-info small {
            color: rgba(0, 0, 0, 0.4);
        }

        .song-list li .actions {
            display: flex;
            gap: 10px;
            margin-top: 10px; /* Dorong tindakan ke baris baru saat melipat */
        }
        @media (min-width: 481px) { /* Mencegah pembungkus di layar yang lebih besar */
            .song-list li .actions {
                margin-top: 0;
            }
        }


        .song-list li .actions .action-btn {
            background: var(--button-bg);
            border: 1px solid var(--button-border);
            color: var(--primary-text);
            padding: 8px 12px;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }
        body.light-mode .song-list li .actions .action-btn {
            background: rgba(0, 0, 0, 0.05);
            border-color: var(--button-border);
            color: var(--primary-text);
        }


        .song-list li .actions .action-btn:hover {
            background-color: rgba(255, 255, 255, 0.15);
            border-color: var(--accent-red);
        }
        body.light-mode .song-list li .actions .action-btn:hover {
            background-color: rgba(0, 0, 0, 0.1);
            border-color: var(--accent-purple);
        }

        .action-btn.delete {
            background-color: #dc3545;
            border-color: #dc3545;
            color: white;
        }
        .action-btn.delete:hover {
            background-color: #c82333;
            border-color: #bd2130;
        }
        .action-btn.edit {
            background-color: #007bff;
            border-color: #007bff;
            color: white;
        }
        .action-btn.edit:hover {
            background-color: #0056b3;
            border-color: #004085;
        }

        /* Gaya Modal (sama seperti index.html untuk konsistensi) */
        .modal {
            display: none;
            position: fixed;
            z-index: 101;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.8);
            justify-content: center;
            align-items: center;
            animation: fadeInModal 0.3s ease-out forwards;
        }
        .modal.visible { display: flex; }
        @keyframes fadeInModal { from { opacity: 0; } to { opacity: 1; } }

        .modal-content {
            background: var(--player-bg-dark);
            backdrop-filter: blur(var(--blur-intensity)) saturate(150%);
            -webkit-backdrop-filter: blur(var(--blur-intensity)) saturate(150%);
            border: 1px solid var(--player-border);
            border-radius: var(--border-radius-main);
            box-shadow: 0 15px 50px var(--shadow-deep);
            padding: 30px;
            width: 80%;
            max-width: 500px;
            text-align: left;
            position: relative;
            animation: slideInModal 0.4s ease-out forwards;
        }
        @keyframes slideInModal { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .modal-content h3 {
            font-family: 'Montserrat', sans-serif;
            color: var(--primary-text);
            margin-top: 0;
            margin-bottom: 20px;
            text-align: center;
        }

        .close-button {
            color: var(--secondary-text);
            font-size: 28px;
            font-weight: bold;
            position: absolute;
            top: 10px;
            right: 20px;
            cursor: pointer;
        }

        .close-button:hover,
        .close-button:focus {
            color: var(--accent-red);
            text-decoration: none;
            cursor: pointer;
        }

        .modal .input-group {
            margin-bottom: 15px;
        }
        .modal .admin-btn {
            width: 100%;
            margin-top: 20px;
        }

        .back-home-btn {
            display: inline-block;
            margin-top: 40px;
            padding: 15px 30px;
            background: var(--accent-purple);
            color: white;
            text-decoration: none;
            border-radius: var(--border-radius-sm);
            font-weight: 700;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        .back-home-btn:hover {
            background-color: var(--accent-red);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.7);
        }

        #reload-message {
            color: green;
            margin-top: 15px;
            font-weight: 500;
        }

        /* Panel Admin Responsif */
        @media (max-width: 768px) {
            .admin-container {
                padding: 30px;
            }
            .admin-container h2 {
                font-size: 2em;
            }
            .admin-section h3 {
                font-size: 1.5em;
            }
            .song-list li {
                flex-direction: column;
                align-items: flex-start;
            }
            .song-list li .song-info {
                width: 100%;
                margin-right: 0;
                margin-bottom: 10px;
            }
            .song-list li .actions {
                width: 100%;
                justify-content: flex-end;
                margin-top: 0;
            }
            .back-home-btn {
                padding: 12px 25px;
                font-size: 0.9em;
            }
        }
        @media (max-width: 480px) {
            .admin-container {
                padding: 20px;
            }
            .admin-container h2 {
                font-size: 1.8em;
            }
            .admin-section h3 {
                font-size: 1.3em;
            }
            .input-group label {
                font-size: 0.9em;
            }
            .input-group input,
            .input-group textarea,
            .admin-section-content input {
                font-size: 0.9em;
                padding: 8px;
            }
            .admin-btn {
                padding: 8px 15px;
                font-size: 0.9em;
            }
            .song-list li .song-info h3 {
                font-size: 1em;
            }
            .song-list li .song-info p, .song-list li .song-info small {
                font-size: 0.8em;
            }
            .song-list li .actions .action-btn {
                padding: 6px 10px;
                font-size: 0.8em;
            }
            .modal-content {
                padding: 20px;
            }
            .modal-content h3 {
                font-size: 1.3em;
            }
        }
    </style>
</head>
<body>
    <div class="video-background">
        <video id="background-video" autoplay loop muted playsinline>
            <source src="abstract_wave_bg.mp4" type="video/mp4">
            Browser Anda tidak mendukung video HTML5.
        </video>
        <div class="video-overlay"></div>
    </div>

    <header>
        <div class="app-branding">
            <h1 id="app-title-new" class="app-title-new">
                <i class="fas fa-music"></i> MelodyVerse
            </h1>
        </div>
        <div class="header-right-controls">
            <button id="toggle-theme-btn" class="btn btn-icon" aria-label="Toggle Tema">
                <i class="fas fa-sun"></i>
            </button>
        </div>
    </header>

    <div class="container">
        <div class="admin-container">
            <h2>Panel Admin</h2>

            <div id="login-section" class="admin-section">
                <h3>Login Admin</h3>
                <div class="admin-section-content">
                    <div class="input-group">
                        <label for="admin-password">Password:</label>
                        <input type="password" id="admin-password" placeholder="Masukkan password admin">
                    </div>
                    <button id="login-btn" class="admin-btn">Login</button>
                    <p id="login-message" style="color: red; margin-top: 10px;"></p>
                </div>
            </div>

            <div id="admin-panel">
                <div class="admin-section">
                    <h3>Tambah Lagu Baru</h3>
                    <div class="admin-section-content">
                        <div class="input-group">
                            <label for="song-title">Judul Lagu:</label>
                            <input type="text" id="song-title">
                        </div>
                        <div class="input-group">
                            <label for="song-artist">Artis:</label>
                            <input type="text" id="song-artist">
                        </div>
                        <div class="input-group">
                            <label for="song-src">Nama File MP3 (ex: song.mp3):</label>
                            <input type="text" id="song-src" placeholder="misalnya: song.mp3">
                        </div>
                        <div class="input-group">
                            <label for="song-album-art">Nama File Album Art (ex: album_art.jpg):</label>
                            <input type="text" id="song-album-art" placeholder="misalnya: album_art.jpg">
                        </div>
                        <div class="input-group">
                            <label for="song-info">Info Lagu (Gunakan &lt;br&gt; untuk baris baru):</label>
                            <textarea id="song-info"></textarea>
                        </div>
                        <button id="add-song-btn" class="admin-btn">Tambah Lagu</button>
                        <p id="add-song-message" style="color: green; margin-top: 10px;"></p>
                    </div>
                </div>

                <div class="admin-section">
                    <h3>Kelola Lagu</h3>
                    <div class="admin-section-content">
                        <ul id="manage-song-list" class="song-list">
                            </ul>
                    </div>
                </div>

                <div class="admin-section">
                    <h3>Opsi Lain</h3>
                    <div class="admin-section-content">
                        <button id="clear-data-btn" class="admin-btn" style="background-color: #ffc107; color: black;"><i class="fas fa-eraser"></i> Bersihkan Semua Data Lagu</button>
                        <p style="font-size: 0.9em; color: var(--secondary-text); margin-top: 10px;">(Ini akan menghapus semua lagu yang tersimpan di browser Anda)</p>
                        <button id="reload-app-btn" class="admin-btn" style="background-color: #17a2b8;"><i class="fas fa-sync-alt"></i> Muat Ulang Aplikasi (Client Side)</button>
                        <p id="reload-message"></p>
                    </div>
                </div>
            </div>

            <a href="index.html" class="back-home-btn">Kembali ke Pemutar Musik</a>
        </div>
    </div>

    <div id="editSongModal" class="modal">
        <div class="modal-content glass-effect">
            <span class="close-button">&times;</span>
            <h3>Edit Lagu</h3>
            <input type="hidden" id="edit-song-index">
            <div class="input-group">
                <label for="edit-song-title">Judul Lagu:</label>
                <input type="text" id="edit-song-title">
            </div>
            <div class="input-group">
                <label for="edit-song-artist">Artis:</label>
                <input type="text" id="edit-song-artist">
            </div>
            <div class="input-group">
                <label for="edit-song-src">Nama File MP3:</label>
                <input type="text" id="edit-song-src" disabled> </div>
            <div class="input-group">
                <label for="edit-song-album-art">Nama File Album Art:</label>
                <input type="text" id="edit-song-album-art">
            </div>
            <div class="input-group">
                <label for="edit-song-info">Info Lagu (Gunakan &lt;br&gt; untuk baris baru):</label>
                <textarea id="edit-song-info"></textarea>
            </div>
            <button id="save-edit-btn" class="admin-btn">Simpan Perubahan</button>
        </div>
    </div>

    <script>
        // Copy-paste DEFAULT_PLAYLIST dari script.js utama
        // Pastikan DEFAULT_PLAYLIST_ADMIN ini sama persis dengan DEFAULT_PLAYLIST di script.js
        const DEFAULT_PLAYLIST_ADMIN = [
             {
            title: "Back to Friends",
            artist: "Sombr",
            src: "back_to_friends.mp3",
            albumArt: "album_art_back_to_friends.jpg",
            info: `<b>🎶 Back to Friends – Sombr</b><br><br>
                Lagu ini menggambarkan kerumitan transisi dari hubungan romantis ke pertemanan. Liriknya, "How can we go back to being friends when we just shared a bed?", menyoroti kebingungan dan kesulitan emosional setelah melewati batas dalam sebuah hubungan. Dibuat dengan melodi yang melankolis namun memikat, lagu ini cocok untuk siapa saja yang pernah merasakan dilema serupa.`
        },
        {
            title: "Bergema Sampai Selamanya",
            artist: "Nadhif Basalamah",
            src: "bergema_sampai_selamanya.mp3",
            albumArt: "album_art_bergema_sampai_selamanya.jpg",
            info: `<b>🎶 Bergema Sampai Selamanya – Nadhif Basalamah</b><br><br>
                Lagu ini adalah ode untuk cinta abadi yang tidak akan pernah pudar oleh waktu. Melalui lirik puitis, Nadhif Basalamah menangkap esensi dari ikatan yang mendalam, di mana setiap napas dan langkah diisi dengan kenangan tak terlupakan. Makna dari lagu ini adalah tentang janji yang terukir abadi di jiwa, sebuah pengingat bahwa cinta sejati akan selalu bergema, melewati batas ruang dan waktu.`
        },
        {
            title: "Ride",
            artist: "SoMo",
            src: "ride.mp3",
            albumArt: "album_art_ride.jpg",
            info: `<b>🎶 Ride – SoMo</b><br><br>
                "Ride" adalah lagu yang merayakan kebebasan dan kegembiraan dalam menikmati hidup tanpa beban. SoMo mengajak pendengar untuk melepaskan kekhawatiran dan menikmati setiap momen perjalanan. Inspirasi di balik lagu ini adalah tentang menjalani hidup dengan santai, seperti mengendarai mobil di bawah langit cerah tanpa tujuan pasti, hanya menikmati kebersamaan dan keindahan yang ada.`
        },
        {
            title: "Rumah Kita",
            artist: "God Bless",
            src: "rumah_kita.mp3",
            albumArt: "album_art_rumah_kita.jpg",
            info: `<b>🎶 Rumah Kita – God Bless</b><br><br>
                Lagu legendaris dari God Bless ini adalah metafora tentang kesederhanaan dan kehangatan sebuah rumah, bukan dari kemewahannya, melainkan dari cinta dan kebersamaan di dalamnya. "Rumah Kita" diciptakan sebagai pengingat bahwa kebahagiaan sejati ditemukan dalam ikatan keluarga dan tempat di mana kita merasa aman dan dicintai, jauh lebih berharga dari istana mana pun.`
        },
        {
            title: "Style",
            artist: "Taylor Swift",
            src: "style.mp3",
            albumArt: "album_art_style.jpg",
            info: `<b>🎶 Style – Taylor Swift</b><br><br>
                "Style" adalah lagu yang menangkap dinamika hubungan yang rumit namun tak terhindarkan, di mana dua individu terus-menerus kembali satu sama lain, seperti "we never go out of style". Lagu ini menceritakan tentang daya tarik yang kuat dan tak lekang oleh waktu antara dua orang yang, meskipun menghadapi pasang surut, selalu menemukan jalan kembali. Dibuat dengan sentuhan pop yang kental dan nuansa 80-an.`
        },
        {
            title: "Message In A Bottle",
            artist: "Taylor Swift",
            src: "message_in_a_bottle.mp3",
            albumArt: "album_art_message_in_a_bottle.jpg",
            info: `<b>🎶 Message In A Bottle – Taylor Swift</b><br><br>
                Terinspirasi dari perasaan kerinduan dan harapan, "Message In A Bottle" adalah lagu yang menggambarkan upaya untuk menjaga kenangan dan cinta tetap hidup, meskipun terpisah jarak. Seperti pesan dalam botol yang dilemparkan ke lautan, lagu ini adalah doa agar suatu hari pesan cinta dan kenangan akan menemukan jalannya kembali kepada orang yang dituju. Melodinya yang menyentuh hati mencerminkan emosi mendalam tentang kehilangan dan harapan.`
        },
        {
            title: "Supernatural",
            artist: "Ariana Grande",
            src: "supernatural.mp3",
            albumArt: "album_art_supernatural.jpg",
            info: `<b>🎶 Supernatural – Ariana Grande</b><br><br>
                "Supernatural" adalah lagu yang merayakan cinta yang terasa di luar dunia ini, ajaib dan tak dapat dijelaskan. Ariana Grande menyanyikan tentang hubungan yang begitu mendalam sehingga terasa seperti takdir, di mana setiap sentuhan dan pandangan menciptakan alam semesta baru. Makna lagu ini adalah tentang menemukan koneksi spiritual yang unik dan ilahi dengan seseorang, yang melampaui logika dan membuat segalanya terasa alami dan sempurna.`
        },
        {
            title: "Favorite Lesson",
            artist: "Yaeow",
            src: "favorite_lesson.mp3",
            albumArt: "album_art_favorite_lesson.jpg",
            info: `<b>🎶 Favorite Lesson – Yaeow</b><br><br>
                Lagu ini adalah penghormatan tulus kepada seseorang yang selalu memberikan pelajaran berharga dalam hidup. Yaeow mengungkapkan rasa syukur atas bimbingan dan dukungan tak henti, yang membantu melewati kesulitan dan tumbuh menjadi pribadi yang lebih baik. Lagu ini dibuat sebagai pengingat akan pentingnya memiliki seseorang yang selalu mendorong, menguji, dan menjadi sumber inspirasi sejati, menjadikan setiap pelajaran sebagai yang terbaik.`
        },
        {
            title: "So High School",
            artist: "Taylor Swift",
            src: "so_high_school.mp3",
            albumArt: "album_art_so_high_school.jpg",
            info: `<b>🎶 So High School – Taylor Swift</b><br><br>
                "So High School" menangkap perasaan gembira dan malu-malu dari romansa remaja pertama yang intens. Taylor Swift menggambarkan momen-momen klasik cinta masa SMA, dari kupu-kupu di perut hingga bisikan rahasia, yang membuat segalanya terasa baru dan istimewa. Lagu ini merayakan kemurnian dan kegembiraan dari jatuh cinta pertama, di mana setiap interaksi terasa seperti adegan dari film romantis, tanpa beban dan penuh impian.`
        },
        {
            title: "Photograph",
            artist: "Ed Sheeran",
            src: "photograph.mp3",
            albumArt: "album_art_photograph.jpg",
            info: `<b>🎶 Photograph – Ed Sheeran</b><br><br>
                "Photograph" adalah balada yang menyentuh tentang kenangan yang abadi dan janji untuk selalu ada, bahkan ketika jarak memisahkan. Ed Sheeran menggunakan metafora foto untuk menggambarkan bagaimana kenangan seseorang tetap hidup dalam hati, memberikan kekuatan dan kenyamanan. Lagu ini adalah pengingat bahwa meskipun "loving can hurt", cinta dan kenangan yang indah adalah satu-satunya hal yang kita bawa saat pergi, janji untuk selalu menunggu dan berada di sana.`
        },
        {
            title: "You'll Be In My Heart",
            artist: "Niki",
            src: "youll_be_in_my_heart.mp3",
            albumArt: "album_art_youll_be_in_my_heart.jpg",
            info: `<b>🎶 You'll Be In My Heart – Niki</b><br><br>
                Lagu ini adalah sebuah lagu pengantar tidur dan janji perlindungan abadi, awalnya dari film Tarzan. Versi Niki membawa kehangatan dan ketenangan yang sama, menekankan ikatan tak terpisahkan antara dua jiwa. Makna lagu ini adalah tentang cinta tanpa syarat yang akan selalu ada, mengatasi keraguan dan perbedaan, memberikan rasa aman dan kenyamanan yang mendalam, karena "you'll be in my heart, from this day on, now and forever more."`
        },
        {
            title: "Tarot",
            artist: ".Feast",
            src: "tarot.mp3",
            albumArt: "album_art_tarot.jpg",
            info: `<b>🎶 Tarot – .Feast</b><br><br>
                "Tarot" oleh .Feast adalah eksplorasi tentang takdir, pilihan, dan rahasia kehidupan yang terungkap melalui kartu tarot. Lagu ini mengajak pendengar untuk membuka mata terhadap petunjuk yang tersembunyi, memahami bahwa takdir bukanlah garis tangan semata, melainkan hasil dari keberanian menghadapi persimpangan dan badai. Dengan melodi yang misterius, lagu ini merenungkan bagaimana setiap simbol dan pilihan membentuk kisah kita yang abadi.`
        },
        {
            title: "O, Tuan",
            artist: ".Feast",
            src: "o_tuan.mp3",
            albumArt: "album_art_o_tuan.jpg",
            info: `<b>🎶 O, Tuan – .Feast</b><br><br>
                "O, Tuan" adalah lagu dengan nuansa kritik sosial dan pencarian kebenaran di tengah hiruk pikuk dunia. .Feast menyuarakan rintihan hati yang resah, mencari makna di balik janji-janji kosong dan kemunafikan kekuasaan. Lagu ini adalah seruan untuk bimbingan, mengingatkan bahwa meskipun harta dan kekuasaan bisa membutakan, keadilan akan selalu hidup dan menjadi tumpuan sampai akhir.`
        },
        {
            title: "Ramai Sepi Bersama",
            artist: "Hindia",
            src: "ramai_sepi_bersama.mp3",
            albumArt: "album_art_ramai_sepi_bersama.jpg",
            info: `<b>🎶 Ramai Sepi Bersama – Hindia</b><br><br>
                Lagu ini menangkap paradoks kesendirian di tengah keramaian kota. Hindia merenungkan bagaimana seseorang bisa merasa terasing dan sunyi meskipun dikelilingi banyak orang. "Ramai Sepi Bersama" adalah sebuah perjalanan introspektif untuk mencari arti dan damai sejati di antara ilusi dan bising kehidupan modern, berharap menemukan cahaya di ujung keluh agar tak lagi merasa rapuh.`
        },
        {
            title: "Everything U Are",
            artist: "Hindia",
            src: "everything_u_are.mp3",
            albumArt: "album_art_everything_u_are.jpg",
            info: `<b>🎶 Everything U Are – Hindia</b><br><br>
                "Everything U Are" adalah lagu cinta yang mendalam, merayakan esensi sejati seseorang yang menjadi segalanya bagi pembicara. Hindia menggambarkan bagaimana kehadiran orang tersebut membawa kedamaian dan menjadi bintang penuntun yang menanamkan harapan. Setiap momen bersama terasa ilahi, dan lagu ini adalah pengakuan bahwa keindahan sejati ada dalam setiap sisi dan detail dari orang yang dicintai, sebuah mahakarya yang tak terlukiskan.`
        }
        ];

    document.addEventListener('DOMContentLoaded', () => {
            const adminPasswordInput = document.getElementById('admin-password');
            const loginBtn = document.getElementById('login-btn');
            const loginMessage = document.getElementById('login-message');
            const loginSection = document.getElementById('login-section');
            const adminPanel = document.getElementById('admin-panel');

            const songTitleInput = document.getElementById('song-title');
            const songArtistInput = document.getElementById('song-artist');
            const songSrcInput = document.getElementById('song-src');
            const songAlbumArtInput = document.getElementById('song-album-art');
            const songInfoInput = document.getElementById('song-info');
            const addSongBtn = document.getElementById('add-song-btn');
            const addSongMessage = document.getElementById('add-song-message');
            const manageSongList = document.getElementById('manage-song-list');

            const editSongModal = document.getElementById('editSongModal');
            const closeButton = editSongModal.querySelector('.close-button');
            const editSongIndexInput = document.getElementById('edit-song-index');
            const editSongTitleInput = document.getElementById('edit-song-title');
            const editSongArtistInput = document.getElementById('edit-song-artist');
            const editSongSrcInput = document.getElementById('edit-song-src');
            const editSongAlbumArtInput = document.getElementById('edit-song-album-art');
            const editSongInfoInput = document.getElementById('edit-song-info');
            const saveEditBtn = document.getElementById('save-edit-btn');

            const clearDataBtn = document.getElementById('clear-data-btn');
            const reloadAppBtn = document.getElementById('reload-app-btn');
            const reloadMessage = document.getElementById('reload-message');

            const toggleThemeBtn = document.getElementById('toggle-theme-btn');
            const backgroundVideo = document.getElementById('background-video');

            const ADMIN_PASSWORD = "157299pro";

            // Ini akan menjadi playlist yang dimanipulasi di admin panel
            // Ini akan selalu berisi gabungan DEFAULT_PLAYLIST dari script.js utama
            // dan apa pun yang disimpan di localStorage oleh admin itu sendiri.
            let adminManagedPlaylist = [];

            // Fungsi untuk memuat playlist ke admin panel dari localStorage atau default
            function loadAdminManagedPlaylist() {
                try {
                    const savedSongs = JSON.parse(localStorage.getItem('musicPlaylist'));
                    
                    // Filter lagu default dari savedSongs untuk menghindari duplikasi
                    // yang sudah diedit atau dihapus di admin panel.
                    // Ini penting agar `adminManagedPlaylist` mencerminkan state yang benar.
                    const filteredDefault = DEFAULT_PLAYLIST_ADMIN.filter(defaultSong => 
                        !savedSongs || !savedSongs.some(savedSong => savedSong.src === defaultSong.src)
                    );

                    if (savedSongs && savedSongs.length > 0) {
                        // Gabungkan lagu default yang belum ada di savedSongs dengan savedSongs.
                        adminManagedPlaylist = [...filteredDefault, ...savedSongs];
                    } else {
                        // Jika belum ada apa-apa di localStorage, mulai dengan semua lagu default.
                        adminManagedPlaylist = [...DEFAULT_PLAYLIST_ADMIN];
                    }
                } catch (e) {
                    console.error("Error saat memuat playlist admin dari localStorage:", e);
                    // Fallback ke default playlist jika ada error parsing localStorage
                    adminManagedPlaylist = [...DEFAULT_PLAYLIST_ADMIN];
                }
                savePlaylist(); // Simpan versi yang sudah dikonsolidasi ke localStorage
                renderSongList();
            }

            // Fungsi untuk menyimpan playlist dari admin panel ke localStorage
            function savePlaylist() {
                localStorage.setItem('musicPlaylist', JSON.stringify(adminManagedPlaylist));
                // Memicu event 'storage' untuk halaman utama agar playlist diperbarui
                window.dispatchEvent(new Event('storage'));
            }

            // Logika Login Admin
            loginBtn.addEventListener('click', () => {
                if (adminPasswordInput.value === ADMIN_PASSWORD) {
                    loginSection.style.display = 'none';
                    adminPanel.style.display = 'block';
                    loginMessage.textContent = '';
                    loadAdminManagedPlaylist(); // Muat playlist saat login berhasil
                } else {
                    loginMessage.textContent = 'Password salah!';
                }
                adminPasswordInput.value = '';
            });

            // Logika Tambah Lagu
            addSongBtn.addEventListener('click', () => {
                const title = songTitleInput.value.trim();
                const artist = songArtistInput.value.trim();
                const src = songSrcInput.value.trim();
                const albumArt = songAlbumArtInput.value.trim();
                const info = songInfoInput.value.trim();

                if (!title || !artist || !src || !albumArt || !info) {
                    addSongMessage.style.color = 'red';
                    addSongMessage.textContent = 'Semua field harus diisi!';
                    return;
                }
                
                const fileExtensionRegex = /\.(mp3|wav|ogg|m4a)$/i;
                const imageExtensionRegex = /\.(jpg|jpeg|png|gif|webp)$/i;

                if (!fileExtensionRegex.test(src)) {
                    addSongMessage.style.color = 'red';
                    addSongMessage.textContent = 'Nama file MP3 harus memiliki ekstensi audio yang valid (mis: .mp3)!';
                    return;
                }
                if (!imageExtensionRegex.test(albumArt)) {
                    addSongMessage.style.color = 'red';
                    addSongMessage.textContent = 'Nama file Album Art harus memiliki ekstensi gambar yang valid (mis: .jpg)!';
                    return;
                }

                const newSong = { title, artist, src, albumArt, info };
                adminManagedPlaylist.push(newSong); // Tambah ke playlist yang dikelola admin
                savePlaylist();
                renderSongList(); // Render ulang daftar di admin panel
                addSongMessage.style.color = 'green';
                addSongMessage.textContent = 'Lagu berhasil ditambahkan dan tersedia untuk semua orang (pastikan file ada di GitHub Pages)!';
                
                songTitleInput.value = '';
                songArtistInput.value = '';
                songSrcInput.value = '';
                songAlbumArtInput.value = '';
                songInfoInput.value = '';
            });

            // Logika Hapus Lagu
            manageSongList.addEventListener('click', (event) => {
                const targetButton = event.target.closest('.delete-btn');
                if (targetButton) {
                    const indexToDelete = parseInt(targetButton.dataset.index);
                    if (confirm(`Anda yakin ingin menghapus lagu "${adminManagedPlaylist[indexToDelete].title}"?`)) {
                        adminManagedPlaylist.splice(indexToDelete, 1);
                        savePlaylist();
                        renderSongList();
                    }
                }
            });

            // Logika Edit Lagu (Buka Modal)
            manageSongList.addEventListener('click', (event) => {
                const targetButton = event.target.closest('.edit-btn');
                if (targetButton) {
                    const indexToEdit = parseInt(targetButton.dataset.index);
                    const song = adminManagedPlaylist[indexToEdit];

                    editSongIndexInput.value = indexToEdit;
                    editSongTitleInput.value = song.title;
                    editSongArtistInput.value = song.artist;
                    editSongSrcInput.value = song.src;
                    editSongAlbumArtInput.value = song.albumArt;
                    editSongInfoInput.value = song.info;

                    editSongModal.classList.add('visible');
                }
            });

            // Tutup Modal Edit Lagu
            closeButton.addEventListener('click', () => {
                editSongModal.classList.remove('visible');
            });
            window.addEventListener('click', (event) => {
                if (event.target == editSongModal) {
                    editSongModal.classList.remove('visible');
                }
            });

            // Simpan Lagu yang Diedit
            saveEditBtn.addEventListener('click', () => {
                const index = parseInt(editSongIndexInput.value);
                if (index < 0 || index >= adminManagedPlaylist.length) {
                    alert('Indeks lagu tidak valid.');
                    return;
                }

                adminManagedPlaylist[index].title = editSongTitleInput.value.trim();
                adminManagedPlaylist[index].artist = editSongArtistInput.value.trim();
                adminManagedPlaylist[index].albumArt = editSongAlbumArtInput.value.trim();
                adminManagedPlaylist[index].info = editSongInfoInput.value.trim();

                savePlaylist();
                renderSongList();
                editSongModal.classList.remove('visible');
                alert('Lagu berhasil diperbarui!');
            });

            // Bersihkan Semua Data (Reset ke DEFAULT_PLAYLIST)
            clearDataBtn.addEventListener('click', () => {
                if (confirm('Ini akan menghapus SEMUA lagu yang tersimpan di browser Anda dan MERESET ke daftar lagu default bawaan aplikasi. Lanjutkan?')) {
                    localStorage.removeItem('musicPlaylist');
                    adminManagedPlaylist = [...DEFAULT_PLAYLIST_ADMIN]; // Reset ke default playlist admin
                    savePlaylist(); // Simpan default playlist ke localStorage
                    renderSongList();
                    alert('Semua data lagu telah direset ke default!');
                }
            });

            // Muat Ulang Aplikasi (Client Side)
            reloadAppBtn.addEventListener('click', () => {
                reloadMessage.textContent = 'Memuat ulang aplikasi...';
                setTimeout(() => {
                    window.location.href = 'index.html'; // Redirect ke halaman utama, memaksa pemuatan ulang penuh
                }, 1000);
            });

            // Toggle Tema untuk halaman Admin
            function toggleTheme() {
                document.body.classList.toggle('light-mode');
                const isLightMode = document.body.classList.contains('light-mode');
                localStorage.setItem('theme', isLightMode ? 'light' : 'dark');
                toggleThemeBtn.innerHTML = isLightMode ? '<i class="fas fa-moon"></i>' : '<i class="fas fa-sun"></i>';
                toggleThemeBtn.setAttribute('aria-label', isLightMode ? 'Beralih ke Mode Gelap' : 'Beralih ke Mode Terang');
            }

            toggleThemeBtn.addEventListener('click', toggleTheme);

            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'light') {
                document.body.classList.add('light-mode');
                toggleThemeBtn.innerHTML = '<i class="fas fa-moon"></i>';
                toggleThemeBtn.setAttribute('aria-label', 'Beralih ke Mode Gelap');
            } else {
                document.body.classList.remove('light-mode');
                toggleThemeBtn.innerHTML = '<i class="fas fa-sun"></i>';
                toggleThemeBtn.setAttribute('aria-label', 'Beralih ke Mode Terang');
            }

            if (backgroundVideo) {
                backgroundVideo.play().catch(error => {
                    console.log('Autoplay dicegah di halaman admin. Mungkin diperlukan interaksi pengguna.', error);
                });
            }

            // Inisialisasi awal saat halaman admin dimuat (jika tidak login)
            // Ini agar adminManagedPlaylist tidak kosong saat login pertama kali.
            if (loginSection.style.display !== 'none') { // Hanya jalankan jika belum login
                 try {
                    const savedSongs = JSON.parse(localStorage.getItem('musicPlaylist'));
                    if (savedSongs && savedSongs.length > 0) {
                        adminManagedPlaylist = savedSongs;
                    } else {
                        adminManagedPlaylist = [...DEFAULT_PLAYLIST_ADMIN]; // Ambil salinan default
                    }
                } catch (e) {
                    console.error("Error saat inisialisasi playlist admin di luar login:", e);
                    adminManagedPlaylist = [...DEFAULT_PLAYLIST_ADMIN];
                }
            }
        });
    </script>
</body>
</html>
